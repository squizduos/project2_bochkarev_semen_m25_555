Примитивная база данных для управления таблицами и данными.

## Управление таблицами

Модуль "База данных" позволяет создавать, просматривать и удалять таблицы с поддержкой различных типов данных.

### Команды управления таблицами

- `create_table <имя_таблицы> <столбец1:тип> <столбец2:тип> ...` - создать таблицу
- `list_tables` - показать список всех таблиц
- `drop_table <имя_таблицы>` - удалить таблицу
- `help` - показать справку
- `exit` - выйти из программы

### Поддерживаемые типы данных

- `int` - целое число
- `str` - строка
- `bool` - логическое значение

## CRUD-операции

Модуль поддерживает полный набор операций для работы с данными в таблицах.

### Команды CRUD

- `insert into <имя_таблицы> values (<значение1>, <значение2>, ...)` - создать запись
- `select from <имя_таблицы> where <столбец> = <значение>` - прочитать записи по условию
- `select from <имя_таблицы>` - прочитать все записи
- `update <имя_таблицы> set <столбец1> = <новое_значение1> where <столбец_условия> = <значение_условия>` - обновить запись
- `delete from <имя_таблицы> where <столбец> = <значение>` - удалить запись
- `info <имя_таблицы>` - вывести информацию о таблице

### Пример использования

#### Создание таблицы

```
>>> database

***Операции с данными***

Функции:
<command> insert into <имя_таблицы> values (<значение1>, <значение2>, ...) - создать запись.
<command> select from <имя_таблицы> where <столбец> = <значение> - прочитать записи по условию.
<command> select from <имя_таблицы> - прочитать все записи.
<command> update <имя_таблицы> set <столбец1> = <новое_значение1> where <столбец_условия> = <значение_условия> - обновить запись.
<command> delete from <имя_таблицы> where <столбец> = <значение> - удалить запись.
<command> info <имя_таблицы> - вывести информацию о таблице.
<command> exit - выход из программы
<command> help - справочная информация

>>> Введите команду: create_table users name:str age:int is_active:bool
Таблица "users" успешно создана со столбцами: ID:int, name:str, age:int, is_active:bool
```

#### Вставка данных

```
>>> Введите команду: insert into users values ("Sergei", 28, true)
Запись с ID=1 успешно добавлена в таблицу "users".
```

#### Выборка данных

```
>>> Введите команду: select from users where age = 28
+----+--------+-----+-----------+
| ID |  name  | age | is_active |
+----+--------+-----+-----------+
| 1  | Sergei | 28  |    True   |
+----+--------+-----+-----------+

>>> Введите команду: select from users
+----+--------+-----+-----------+
| ID |  name  | age | is_active |
+----+--------+-----+-----------+
| 1  | Sergei | 28  |    True   |
+----+--------+-----+-----------+
```

#### Обновление данных

```
>>> Введите команду: update users set age = 29 where name = "Sergei"
Запись с ID=1 в таблице "users" успешно обновлена.
```

#### Удаление данных

```
>>> Введите команду: delete from users where ID = 1
Вы уверены, что хотите выполнить "удаление записи"? [y/n]: y
Запись с ID=1 успешно удалена из таблицы "users".
```

#### Удаление таблицы

```
>>> Введите команду: drop_table users
Вы уверены, что хотите выполнить "удаление таблицы"? [y/n]: y
Таблица "users" успешно удалена.
```

#### Информация о таблице

```
>>> Введите команду: info users
Таблица: users
Столбцы: ID:int, name:str, age:int, is_active:bool
Количество записей: 0
```

### Особенности

- ID генерируется автоматически при вставке записи
- Все поля являются обязательными
- Данные каждой таблицы хранятся в отдельном JSON-файле в директории `data/`
- Для вывода данных используется библиотека PrettyTable

## Дополнительные возможности

### Обработка ошибок

Все операции с базой данных автоматически обрабатывают ошибки через декораторы:
- `FileNotFoundError` - файл данных не найден
- `KeyError` - таблица или столбец не найден
- `ValueError` - ошибки валидации типов данных

При возникновении ошибки выводится понятное сообщение на русском языке.

### Подтверждение опасных операций

Для операций, которые могут привести к потере данных, требуется подтверждение:
- `drop_table` - удаление таблицы
- `delete` - удаление записей

Перед выполнением операции система запрашивает подтверждение:
```
Вы уверены, что хотите выполнить "удаление таблицы"? [y/n]:
```

Операция выполняется только при вводе `y`.

### Логирование времени выполнения

Операции, работающие с файлами, автоматически замеряют время выполнения:
- `select` - выборка данных
- `insert` - вставка данных

После выполнения операции выводится время выполнения:
```
Функция select выполнилась за 0.123 секунд.
```

### Кэширование запросов

Результаты операций `select` кэшируются для повышения производительности. Кэш автоматически очищается при изменении данных (insert, update, delete), что гарантирует актуальность результатов.

### Установка

```bash
make install
```

или

```bash
poetry install
```

### Запуск

```bash
make run
```

или

```bash
poetry run database
```

### Сборка и установка пакета

```bash
make build
make package-install
```

После установки пакета команда `database` будет доступна в терминале.

## Демонстрация

[![asciicast](https://asciinema.org/a/Cu72jKThJahEzhNc.svg)](https://asciinema.org/a/Cu72jKThJahEzhNc)

